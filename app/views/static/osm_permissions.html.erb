<% provide :title, "OSM Permissions" %>

<p>To change what this site is able to do with your data in OSM you need change our access rights in OSM, to do this:</p>
<ol>
  <li>Go to <a href="https://www.onlinescoutmanager.co.uk" target="_blank">https://www.onlinescoutmanager.co.uk</a> and login.</li>
  <li>Using the "Account" drop down menu choose "External Access"</li>
  <li>Setup "<%= OSM::API.api_name %>" to have access to your data, the list below shows what permissions are used for what as well as what permissions you have granted.
</ol>

<br/>

<%- if @osmx_permissions && current_role %>
  <table>
    <tr><th>OSM&nbsp;Permission</th><th>Site&nbsp;Action</th><th>Requires</th><th>Granted<br/>(to OSMX)</th><th>Granted<br/>(to your OSM user)</th></tr>

    <tr><td class="title">Scout Details</td><td class="empty" colspan="4"></td></tr>
    <tr><td class="empty"></td><td>Email lists</td><td>Read</td><td><%= yes_no @osmx_permissions.can_read?(:member) %></td><td><%= yes_no current_role.can_read?(:member) %></td></tr>
    <tr><td class="empty"></td><td>Email reminders (birthdays)</td><td>Read</td><td><%= yes_no @osmx_permissions.can_read?(:member) %></td><td><%= yes_no current_role.can_read?(:member) %></td></tr>

    <tr><td class="title">Badge Records</td><td class="empty" colspan="4"></td></tr>
    <tr><td class="empty"></td><td>Email reminders (due badges)</td><td>Read</td><td><%= yes_no @osmx_permissions.can_read?(:badge) %></td><td><%= yes_no current_role.can_read?(:member) %></td></tr>

  <!--  <tr><td class="title">Administration</td><td class="empty" colspan="4"></td></tr><!-- user -->

    <tr><td class="title">Attendance Register</td><td class="empty" colspan="4"></td></tr>
    <tr><td class="empty"></td><td>Email reminders (not seen)</td><td>Read</td><td><%= yes_no @osmx_permissions.can_read?(:register) %><td><%= yes_no current_role.can_read?(:member) %></td></td></tr>

    <tr><td class="title">Programme</td><td class="empty" colspan="4"></td></tr>
    <tr><td class="empty"></td><td>Email reminders (programme)</td><td>Read</td><td><%= yes_no @osmx_permissions.can_read?(:programme) %></td><td><%= yes_no current_role.can_read?(:member) %></td></tr>
    <tr><td class="empty"></td><td>Programme review</td><td>Read</td><td><%= yes_no @osmx_permissions.can_read?(:programme) %></td><td><%= yes_no current_role.can_read?(:member) %></td></tr>

    <tr><td class="title">Events</td><td class="empty" colspan="4"></td></tr>
    <tr><td class="empty"></td><td>Email reminders (events)</td><td>Read</td><td><%= yes_no @osmx_permissions.can_read?(:programme) %></td><td><%= yes_no current_role.can_read?(:member) %></td></tr>

  <!--  <tr><td class="title">Flexi-Records</td><td class="empty" colspan="4"></td></tr> -->

  <!--  <tr><td class="title">Finances</td><td class="empty" colspan="4"></td></tr> -->
  </table>
<%- else %>
  <p>Sorry but an error occured and the current permissions could not be retreived.</p>
<%- end %>
